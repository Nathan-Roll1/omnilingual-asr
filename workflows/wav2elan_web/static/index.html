<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OmniScribe</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <div class="grain"></div>

    <div class="shell">
      <aside class="sidebar">
        <div class="sidebar-brand">
          <div class="brand-mark">O</div>
          <div>
            <h1>OmniScribe</h1>
            <p>Transcript workspace</p>
          </div>
        </div>

        <div class="sidebar-upload">
          <div class="sidebar-upload-actions">
            <label class="btn-primary" for="file-input">Upload audio</label>
            <label class="btn-secondary" for="folder-input">Upload folder</label>
          </div>
          <input id="file-input" type="file" accept=".wav,.mp3,.flac,.ogg,.m4a,.zip" multiple />
          <input id="folder-input" type="file" webkitdirectory directory multiple />
          <p class="sidebar-hint">Supports WAV, MP3, FLAC, OGG, M4A, ZIP</p>
          <div class="sidebar-file-list" id="file-list"></div>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-section-title">Library</div>
          <div id="history-list" class="history-list"></div>
        </div>
      </aside>

      <main class="workspace">
        <header class="workspace-header">
          <div>
            <h2>Transcript Dashboard</h2>
            <p>Click a word to play and edit text or timestamps.</p>
          </div>
          <div class="export-dropdown" id="export-dropdown">
            <button class="btn-secondary" id="export-btn">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Export
              <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <div class="export-menu hidden" id="export-menu">
              <button class="export-option" data-format="eaf">
                <span class="export-format">EAF</span>
                <span class="export-desc">ELAN Annotation Format</span>
              </button>
              <button class="export-option" data-format="textgrid">
                <span class="export-format">TextGrid</span>
                <span class="export-desc">Praat TextGrid</span>
              </button>
              <button class="export-option" data-format="txt">
                <span class="export-format">TXT</span>
                <span class="export-desc">Plain text transcript</span>
              </button>
              <button class="export-option" data-format="srt">
                <span class="export-format">SRT</span>
                <span class="export-desc">Subtitles format</span>
              </button>
              <button class="export-option" data-format="json">
                <span class="export-format">JSON</span>
                <span class="export-desc">Raw transcript data</span>
              </button>
            </div>
          </div>
        </header>

        <section class="drop-zone" id="upload-zone">
          <div class="drop-inner">
            <div class="drop-icon">
              <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M12 15V3m0 0l-4 4m4-4l4 4" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M2 17l.621 2.485A2 2 0 004.561 21h14.878a2 2 0 001.94-1.515L22 17" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div>
              <h3>Drop audio, a folder, or a zip</h3>
              <p>Supports WAV, MP3, FLAC, OGG, M4A and ZIP bundles.</p>
            </div>
          </div>
        </section>

        <section class="progress-section hidden" id="progress-section">
          <div class="progress-steps">
            <div class="progress-step" data-step="0">
              <div class="step-indicator">
                <svg class="step-check hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="step-number">1</span>
              </div>
              <span class="step-label">Uploading</span>
            </div>
            <div class="progress-connector"></div>
            <div class="progress-step" data-step="1">
              <div class="step-indicator">
                <svg class="step-check hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="step-number">2</span>
              </div>
              <span class="step-label">Transcribing</span>
            </div>
            <div class="progress-connector"></div>
            <div class="progress-step" data-step="2">
              <div class="step-indicator">
                <svg class="step-check hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="step-number">3</span>
              </div>
              <span class="step-label">Processing</span>
            </div>
            <div class="progress-connector"></div>
            <div class="progress-step" data-step="3">
              <div class="step-indicator">
                <svg class="step-check hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="step-number">4</span>
              </div>
              <span class="step-label">Complete</span>
            </div>
          </div>
          <div class="progress-bar-track">
            <div class="progress-bar-fill" id="progress-bar-fill"></div>
          </div>
          <div class="progress-meta" id="progress-meta"></div>
        </section>

        <section class="status-bar" id="status">
          <div class="status-pulse"></div>
          <span class="status-text"></span>
        </section>

        <!-- Canvas header (shows current file) -->
        <section class="canvas-header hidden" id="canvas-header">
          <div class="canvas-info">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18V5l12-2v13" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="6" cy="18" r="3"/>
              <circle cx="18" cy="16" r="3"/>
            </svg>
            <span class="canvas-name" id="canvas-name"></span>
          </div>
          <div class="canvas-meta" id="canvas-meta"></div>
        </section>

        <!-- Summary section (shown when available) -->
        <section class="transcript-summary hidden" id="transcript-summary">
          <div class="summary-header">
            <h3>Summary</h3>
            <div class="summary-badges">
              <div class="badge-group" id="language-badges"></div>
              <div class="badge-group" id="speaker-badges"></div>
              <div class="badge-group" id="emotion-badges"></div>
            </div>
          </div>
          <div class="summary-content" id="summary-content"></div>
        </section>

        <!-- View controls -->
        <section class="view-controls hidden" id="view-controls">
          <div class="view-toggle">
            <button class="view-btn active" data-view="flow" title="Flow view">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 6h16M4 12h16M4 18h10" stroke-linecap="round"/>
              </svg>
              Flow
            </button>
            <button class="view-btn" data-view="box" title="Box view">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7" rx="1"/>
                <rect x="14" y="3" width="7" height="7" rx="1"/>
                <rect x="3" y="14" width="7" height="7" rx="1"/>
                <rect x="14" y="14" width="7" height="7" rx="1"/>
              </svg>
              Boxes
            </button>
          </div>
          <div class="highlight-selector">
            <label>Highlight by:</label>
            <select id="highlight-mode">
              <option value="chunk">Chunk</option>
              <option value="speaker">Speaker</option>
              <option value="language">Language</option>
              <option value="emotion">Emotion</option>
            </select>
          </div>
        </section>

        <section class="transcript" id="transcript"></section>
      </main>
    </div>

    <!-- Upload Options Modal -->
    <div class="modal-overlay hidden" id="upload-modal">
      <div class="modal">
        <div class="modal-header">
          <h3>Transcription Options</h3>
          <button class="modal-close" id="modal-close">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="language-select">Language (optional)</label>
            <select id="language-select">
              <option value="">Auto-detect</option>
              <option value="en">English</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="it">Italian</option>
              <option value="pt">Portuguese</option>
              <option value="ru">Russian</option>
              <option value="zh">Chinese</option>
              <option value="ja">Japanese</option>
              <option value="ko">Korean</option>
              <option value="ar">Arabic</option>
              <option value="hi">Hindi</option>
              <option value="other">Other (specify in audio)</option>
            </select>
          </div>
          <div class="form-group">
            <label for="speaker-count">Number of Speakers (optional)</label>
            <select id="speaker-count">
              <option value="">Auto-detect</option>
              <option value="1">1 speaker</option>
              <option value="2">2 speakers</option>
              <option value="3">3 speakers</option>
              <option value="4">4 speakers</option>
              <option value="5">5 speakers</option>
              <option value="6+">6 or more speakers</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" id="modal-cancel">Cancel</button>
          <button class="btn-primary" id="modal-confirm">Start Transcription</button>
        </div>
      </div>
    </div>

    <footer class="player-bar" id="player-bar">
      <div class="player-inner">
        <button class="player-btn" id="play-pause">
          <svg class="icon-play" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8 5v14l11-7z"/>
          </svg>
          <svg class="icon-pause hidden" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <rect x="6" y="4" width="4" height="16"/>
            <rect x="14" y="4" width="4" height="16"/>
          </svg>
        </button>
        <div class="player-time" id="current-time">0:00</div>
        <div class="player-progress">
          <div class="progress-bg">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
          <input type="range" class="progress-input" id="progress-input" min="0" max="100" value="0" />
        </div>
        <div class="player-time" id="duration">0:00</div>
        <audio id="audio"></audio>
      </div>
    </footer>

    <script src="/static/app.js"></script>
  </body>
</html>
